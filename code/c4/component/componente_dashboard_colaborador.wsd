@startuml
!define RECTANGLE_COLOR #ADD8E6
!define RECTANGLE_COLOR_2 #98FB98
!define TEXT_COLOR black

!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml

' Define the system boundary
System_Boundary(system, "BI") {
    ' Define containers
    Container(db, "Banco de Dados", "Azure SQL Server", "Banco de dados relacional, onde armazena dados do sistema.")
    Container(etl, "Sistema ETL", "Databricks", "Extrai, transforma e carrega dados de várias fontes.") {
        Component(extractor, "Extrator", "Databricks", "Extrai dados de sistemas externos e internos.")
        Component(transformer, "Transformador", "Databricks", "Transforma e limpa dados para análise.")
        Component(loader, "Carregador", "Databricks", "Carrega dados transformados no Data Warehouse.")
    }
    Container(dw, "Data Warehouse", "Azure Synapse Analytics", "Armazena dados integrados e transformados.")
    Container(dashboard, "Sistema Dashboard", "Power BI", "Fornece visualizações e relatórios interativos dos dados.")

    ' Define personas
    Person(internalUsers, "Gabinete de Orçamento / Financeiro / Operações", "Usuários internos que gerenciam e avaliam RFPs.")

    ' Define relationships
    Rel(internalUsers, dashboard, "Acessa relatórios e visualizações")
    Rel(db, etl, "Fornece dados brutos para processamento")
    Rel(etl, dw, "Carrega dados transformados")
    Rel(dw, dashboard, "Fornece dados para visualizações e relatórios")
    Rel(dashboard, dw, "Consulta dados para relatórios")

    ' Define detailed relationships for ETL components
    Rel(extractor, transformer, "Passa dados extraídos para transformação")
    Rel(transformer, loader, "Passa dados transformados para carregamento")
}
@enduml
